<!DOCTYPE html>
<html>
  <head>
    <link rel ="stylesheet" href="css/CreaQuizForm.css">
  </head>
  <body>
    
    <form method="post">
        <div class="form-quiz">
          <button id="home">
            <a onclick="window.location.href='home.jsp'">Home</a>
          </button>
          <h1>Crea Quiz</h1>
          <p> * Compila tutti i campi</p><br>
         
          <input type="text" placeholder="Nome Quiz" name="nameQuiz" id="nameQuiz" required>
          <br>
          <br>
          <textarea type="text" placeholder="Descrizione Quiz" name="descriptionQuiz" id="descriptionQuiz" required></textarea>
        <section id="tabQuiz"> 
          <br>
          <div class="domanda" id = "domanda1">          
            <br>
            <div class="descrizione">
            <input type="text" placeholder="Inserisci Domanda"  name = "domanda1" class="newQuestion" required>
            <button class="DeleteDom" id="deleteDom1" onclick="DeleteDom(contdom)">Elimina Domanda</button>
            </div>
            <br>

            
            <div class = "risposte"  id = "risposte1">


              <div class = "risposta" id = "risposta1-1">
                <input type = "checkbox" name = "checkbox1-1">
                <input type="text" placeholder="Inserisci Risposta" name = "risposta1-1" class="inAnswer" required>
                <button class="eliminaRis" onclick="DelRis('risposta1-1')">Elimina</button>
              </div>

              <div class = "risposta"  id = "risposta1-2">
                <input type = "checkbox" name = "checkbox1-2">
                <input type="text" placeholder="Inserisci Risposta" name = "risposta1-2" class="inAnswer" required>
                <button class="eliminaRis" onclick="DelRis('risposta1-2')">Elimina</button>
              </div>

              <div class = "risposta" id = "risposta1-3">
                <input type = "checkbox" name = "checkbox1-3">
                <input type="text" placeholder="Inserisci Risposta" name = "risposta1-3" class="inAnswer" required>
                <button class="eliminaRis" onclick="DelRis('risposta1-3')">Elimina</button>
              </div>

            </div>

            <div>
              <br>

              <button  class="addRis" id="addRis1"  onclick="AddRis(1)">+ Risposta</button>
              <br><br>
            </div>
          </div>
          <br>
           
        </section> 
        <div>
          <br>
          <button id="addDom" onclick="AddDom()">+ Domanda</button>
          <br><br>
        </div>
        <br>
        <button type="submit" name="conferma" id="conferma">CONFERMA CREAZIONE</button>

        
        </div>
    </form>
 
    <script>
      let contatori = [3];
      let lastAdd = 1;

      function AddRis(id){
        
        let DIVRIS = document.createElement ("div");
        DIVRIS.setAttribute("class", "risposta");
        DIVRIS.setAttribute("id", "risposta"+ id + "-"+ ++contatori[id-1]);

        let INPUTCHECK = document.createElement ("input");
        INPUTCHECK.setAttribute("type", "checkbox");
        INPUTCHECK.setAttribute("name","checkbox"+ id + "-"+ contatori[id-1]);
        DIVRIS.appendChild(INPUTCHECK);

        let INPUTTEXT = document.createElement("input");
        INPUTTEXT.setAttribute("type", "text");
        INPUTTEXT.setAttribute("placeholder", "Inserisci Risposta");
        INPUTTEXT.setAttribute ("name","risposta"+ id + "-"+ contatori[id-1]);
        INPUTTEXT.setAttribute("class", "inAnswer");
        DIVRIS.appendChild(INPUTTEXT);

        let BUTTONDEL = document.createElement("button");
        BUTTONDEL.setAttribute("class", "eliminaRis");
        BUTTONDEL.setAttribute("onclick", "DelRis('risposta"+ id + "-"+ contatori[id-1]+"')");
        BUTTONDEL.innerText="Elimina";
        DIVRIS.appendChild(BUTTONDEL);

        let container = document.getElementById("risposte" + id);
        container.appendChild(DIVRIS);

      }

    let contdom = 1;
    let conris = 1;
    let del = 1;
    
    function AddDom(addDom){

      contatori.push(3);

      let DIVDOM = document.createElement ("div");
      DIVDOM.setAttribute("class", "domanda");
      DIVDOM.setAttribute("id", "domanda" + ++contdom);

      let BR1 = document.createElement("br");
      DIVDOM.appendChild(BR1);

      let DIVDESCR = document.createElement ("div");
      DIVDESCR.setAttribute("class", "descrizione");
      DIVDOM.appendChild(DIVDESCR);

      let BR2 = document.createElement("br");
      DIVDOM.appendChild(BR2);

      let INPUTTEXT = document.createElement("input");
      INPUTTEXT.setAttribute("type", "text");
      INPUTTEXT.setAttribute("placeholder", "Inserisci Domanda");
      INPUTTEXT.setAttribute("name", "domanda" + contdom);
      INPUTTEXT.setAttribute("class", "newQuestion");
      DIVDESCR.appendChild(INPUTTEXT);

      let BUTTONDEL = document.createElement("button");
      BUTTONDEL.setAttribute("class", "DeleteDom");
      BUTTONDEL.setAttribute("id", "deleteDom"+ ++del);
      BUTTONDEL.setAttribute("onclick", "DeleteDom("+ del +")");
      BUTTONDEL.innerText="Elimina Domanda";
      DIVDESCR.appendChild(BUTTONDEL);

      let DIVrisposte= document.createElement ("div");

      DIVrisposte.setAttribute("id", "risposte"+ ++conris);
      DIVrisposte.setAttribute("class", "risposte");

      DIVDOM.appendChild(DIVrisposte);

      let BR3 = document.createElement("br");
      DIVDOM.appendChild(BR3);
    
      let c = 0;
      let cont = 0;

      while (c<3){
        let DIVRIS = document.createElement ("div");
        DIVRIS.setAttribute("class", "risposta");      
        DIVRIS.setAttribute("id", "risposta"+ contdom + "-" + ++cont);
        DIVrisposte.appendChild(DIVRIS);

        let INPUTCHECK = document.createElement ("input");
        INPUTCHECK.setAttribute("type", "checkbox");
        INPUTCHECK.setAttribute("name", "checkbox" + contdom + "-" + cont);
        DIVRIS.appendChild(INPUTCHECK);

        let INPUTTEXT = document.createElement("input");
        INPUTTEXT.setAttribute("type", "text");
        INPUTTEXT.setAttribute("placeholder", "Inserisci Risposta");
        INPUTTEXT.setAttribute("name", "risposta" + contdom + "-" + cont);
        INPUTTEXT.setAttribute("class", "inAnswer");
        DIVRIS.appendChild(INPUTTEXT);

        let BUTTONDEL = document.createElement("button");
        BUTTONDEL.setAttribute("class", "eliminaRis");
        BUTTONDEL.setAttribute("onclick", "DelRis('risposta"+ contdom + "-" + cont +"')");
        BUTTONDEL.innerText="Elimina";
        DIVRIS.appendChild(BUTTONDEL);
        c++;
      }

      let btncont = 1;

      let DIVBTNRIS = document.createElement ("div");
      DIVDOM.appendChild(DIVBTNRIS);

      let BUTTONADDRIS = document.createElement("button");
      BUTTONADDRIS.setAttribute("class", "addRis");
      BUTTONADDRIS.setAttribute("id", "addRis"+  ++btncont);
      BUTTONADDRIS.setAttribute("class", "addRis");

      BUTTONADDRIS.setAttribute("onclick", "AddRis(" + ++lastAdd + ")");

      BUTTONADDRIS.innerText="+ Risposta";

      DIVBTNRIS.appendChild(BUTTONADDRIS);

      let BR4 = document.createElement("br");
      DIVDOM.appendChild(BR4);

      let container = document.getElementById("tabQuiz");
      container.appendChild(DIVDOM);

      let BRFUORI = document.createElement("br");
      container.appendChild(BRFUORI);
    
    }


function DelRis (id){
  var deleteRisposta = document.getElementById(id);
 deleteRisposta.remove();
}

    function DeleteDom(del){
      
      var deleteDomanda = document.getElementById("domanda" + del);
      deleteDomanda.remove();

    }


    function createDocument(idItem, className, typeTag){
      
      this.objButton = document.createElement(typeTag);
      this.objButton.id=idItem;
      if(className!="")
        this.objButton.classList.add(className);
      
      return this.objButton;
    }
    </script>
  </body>
</html>
